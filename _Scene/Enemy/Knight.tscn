[gd_scene load_steps=27 format=3 uid="uid://ds567o72hasq4"]

[ext_resource type="Script" path="res://_Script/Enemy/Knight.cs" id="1_4gky3"]
[ext_resource type="Resource" uid="uid://blelmlxfeqqae" path="res://_Script/Resource/Enemies/Knight.tres" id="2_k0pha"]
[ext_resource type="Texture2D" uid="uid://cvmt3mxhnqolr" path="res://_Asset/Enemy/FreeKnight_v1 (1)/120x80_PNGSheets/_Attack.png" id="3_fabnc"]
[ext_resource type="Texture2D" uid="uid://besj4aimfeibr" path="res://_Asset/Enemy/FreeKnight_v1 (1)/120x80_PNGSheets/_Idle.png" id="3_w6a2m"]
[ext_resource type="PackedScene" uid="uid://0uwqmoyxcw0u" path="res://_Scene/Enemy/MobHpBar.tscn" id="4_4slh8"]
[ext_resource type="Script" path="res://_Script/Enemy/ItemDropManager.cs" id="5_iprd0"]
[ext_resource type="Texture2D" uid="uid://bobf57qt4fxrr" path="res://_Asset/Enemy/FreeKnight_v1 (1)/120x80_PNGSheets/_Death.png" id="5_qi6ya"]
[ext_resource type="PackedScene" uid="uid://bhfu7d5soyfhm" path="res://_Scene/Item/BasicItem.tscn" id="6_07jhe"]
[ext_resource type="Texture2D" uid="uid://dmdkuok513ihr" path="res://_Asset/Enemy/FreeKnight_v1 (1)/120x80_PNGSheets/_Run.png" id="6_f7aae"]
[ext_resource type="AudioStream" uid="uid://c5c1ek4t88kkp" path="res://_Asset/Audio/SoundEffect/Slash.mp3" id="7_6v1oc"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_t0cyg"]
size = Vector2(20, 38)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_f8kdc"]
size = Vector2(51, 43)

[sub_resource type="CircleShape2D" id="CircleShape2D_mrxwr"]
radius = 41.4895

[sub_resource type="Animation" id="Animation_hj2mw"]
resource_name = "Attack"
length = 0.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 0), Vector2i(1, 0), Vector2i(2, 0), Vector2i(3, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D/DamageArea/CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [true, false, false, true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:texture")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_fabnc")]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:hframes")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [4]
}

[sub_resource type="Animation" id="Animation_tsfyl"]
resource_name = "Death"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("5_qi6ya")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 0), Vector2i(1, 0), Vector2i(2, 0), Vector2i(3, 0), Vector2i(4, 0), Vector2i(5, 0), Vector2i(6, 0), Vector2i(7, 0), Vector2i(8, 0), Vector2i(9, 0)]
}

[sub_resource type="Animation" id="Animation_er230"]
resource_name = "Idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 0), Vector2i(1, 0), Vector2i(2, 0), Vector2i(3, 0), Vector2i(4, 0), Vector2i(5, 0), Vector2i(6, 0), Vector2i(7, 0), Vector2i(8, 0), Vector2i(9, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:texture")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_w6a2m")]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:hframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}

[sub_resource type="Animation" id="Animation_k6ecr"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D/DamageArea/CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:texture")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_w6a2m")]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:hframes")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Sprite2D:frame")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_r6fym"]
resource_name = "Run"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("6_f7aae")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_r5lm4"]
_data = {
"Attack": SubResource("Animation_hj2mw"),
"Death": SubResource("Animation_tsfyl"),
"Idle": SubResource("Animation_er230"),
"RESET": SubResource("Animation_k6ecr"),
"Run": SubResource("Animation_r6fym")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_r231b"]
animation = &"Attack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7vp4e"]
animation = &"Death"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jjvj6"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1epwm"]
animation = &"Run"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8scil"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_0cloy"]
states/Attack/node = SubResource("AnimationNodeAnimation_r231b")
states/Attack/position = Vector2(503.136, 68)
states/Death/node = SubResource("AnimationNodeAnimation_7vp4e")
states/Death/position = Vector2(777, 100)
states/Idle/node = SubResource("AnimationNodeAnimation_jjvj6")
states/Idle/position = Vector2(516.136, 188)
states/Run/node = SubResource("AnimationNodeAnimation_1epwm")
states/Run/position = Vector2(335, 145)
transitions = ["Death", "End", SubResource("AnimationNodeStateMachineTransition_8scil")]
graph_offset = Vector2(-19.8644, 0)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_20g0c"]
size = Vector2(168, 75)

[node name="Knight" type="Node2D"]

[node name="CharacterBody2D" type="CharacterBody2D" parent="."]
collision_layer = 8
collision_mask = 21
script = ExtResource("1_4gky3")
enemyRes = ExtResource("2_k0pha")

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D"]
position = Vector2(6, -3)
shape = SubResource("RectangleShape2D_t0cyg")

[node name="Sprite2D" type="Sprite2D" parent="CharacterBody2D"]
position = Vector2(0, -23)
scale = Vector2(-1, 1)
texture = ExtResource("3_w6a2m")
hframes = 10

[node name="LeftRayCast" type="RayCast2D" parent="CharacterBody2D/Sprite2D"]
position = Vector2(16, 23)
rotation = 3.14159
scale = Vector2(1, -1)
target_position = Vector2(0, 28)

[node name="AttackRange" type="Area2D" parent="CharacterBody2D/Sprite2D"]
position = Vector2(-19, 23)
rotation = 3.14159
scale = Vector2(1, -1)
collision_layer = 0
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D/Sprite2D/AttackRange"]
position = Vector2(-33.5, -3.5)
shape = SubResource("RectangleShape2D_f8kdc")

[node name="DamageArea" type="Area2D" parent="CharacterBody2D/Sprite2D"]
modulate = Color(1, 0.929412, 0.301961, 1)
position = Vector2(42, 23)
rotation = 3.14159
scale = Vector2(0.846825, -1.08094)
collision_layer = 0
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D/Sprite2D/DamageArea"]
position = Vector2(11.8088, -2.77536)
scale = Vector2(0.81441, 0.518937)
shape = SubResource("CircleShape2D_mrxwr")
disabled = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CharacterBody2D"]
libraries = {
"": SubResource("AnimationLibrary_r5lm4")
}

[node name="AnimationTree" type="AnimationTree" parent="CharacterBody2D"]
libraries = {
"": SubResource("AnimationLibrary_r5lm4")
}
tree_root = SubResource("AnimationNodeStateMachine_0cloy")
anim_player = NodePath("../AnimationPlayer")

[node name="MobHpBar" parent="CharacterBody2D" instance=ExtResource("4_4slh8")]
visible = false
offset_left = -29.0
offset_top = -27.0
offset_right = 29.0
offset_bottom = -20.0

[node name="ItemDropManager" type="Node2D" parent="CharacterBody2D"]
position = Vector2(0, -38)
script = ExtResource("5_iprd0")
MoneyDrop = 10
ExpDrop = 1
ItemResArr = Array[PackedScene]([ExtResource("6_07jhe")])

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="CharacterBody2D"]
stream = ExtResource("7_6v1oc")

[node name="DetectArea" type="Area2D" parent="CharacterBody2D"]
visible = false
collision_layer = 0
collision_mask = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D/DetectArea"]
position = Vector2(0, -21.5)
shape = SubResource("RectangleShape2D_20g0c")

[node name="AttackTimer" type="Timer" parent="CharacterBody2D"]
